generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model LogCheckpoint {
  id            String   @id @default(cuid())
  serviceName   String   @unique
  lastCheckTime DateTime
  updatedAt     DateTime @updatedAt

  @@map("log_checkpoints")
}

model DetectedIssue {
  id                String   @id @default(cuid())
  githubIssueNumber Int      @unique
  errorSignature    String   @unique
  serviceName       String
  errorMessage      String   @db.Text
  firstSeen         DateTime
  lastSeen          DateTime
  occurrenceCount   Int      @default(1)
  claudeAnalyzed    Boolean  @default(false)
  resolved          Boolean  @default(false)
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  @@map("detected_issues")
}
